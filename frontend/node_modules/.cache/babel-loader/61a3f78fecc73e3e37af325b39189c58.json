{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.recoilPersist = void 0;\n/**\n * Recoil module to persist state to storage\n *\n * @param config Optional configuration object\n * @param config.key Used as key in local storage, defaults to `recoil-persist`\n * @param config.storage Local storage to use, defaults to `localStorage`\n */\n\nconst recoilPersist = function () {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (typeof window === 'undefined') {\n    return {\n      persistAtom: () => {}\n    };\n  }\n\n  const {\n    key = 'recoil-persist',\n    storage = localStorage\n  } = config;\n\n  const persistAtom = _ref => {\n    let {\n      onSet,\n      node,\n      trigger,\n      setSelf\n    } = _ref;\n\n    if (trigger === 'get') {\n      const state = getState();\n\n      if (typeof state.then === 'function') {\n        state.then(s => {\n          if (s.hasOwnProperty(node.key)) {\n            setSelf(s[node.key]);\n          }\n        });\n      }\n\n      if (state.hasOwnProperty(node.key)) {\n        setSelf(state[node.key]);\n      }\n    }\n\n    onSet(async (newValue, _, isReset) => {\n      const state = getState();\n\n      if (typeof state.then === 'function') {\n        state.then(s => updateState(newValue, s, node.key, isReset));\n      } else {\n        updateState(newValue, state, node.key, isReset);\n      }\n    });\n  };\n\n  const updateState = (newValue, state, key, isReset) => {\n    if (isReset) {\n      delete state[key];\n    } else {\n      state[key] = newValue;\n    }\n\n    setState(state);\n  };\n\n  const getState = () => {\n    const toParse = storage.getItem(key);\n\n    if (toParse === null || toParse === undefined) {\n      return {};\n    }\n\n    if (typeof toParse === 'string') {\n      return parseState(toParse);\n    }\n\n    if (typeof toParse.then === 'function') {\n      return toParse.then(parseState);\n    }\n\n    return {};\n  };\n\n  const parseState = state => {\n    if (state === undefined) {\n      return {};\n    }\n\n    try {\n      return JSON.parse(state);\n    } catch (e) {\n      console.error(e);\n      return {};\n    }\n  };\n\n  const setState = state => {\n    try {\n      if (typeof storage.mergeItem === 'function') {\n        storage.mergeItem(key, JSON.stringify(state));\n      } else {\n        storage.setItem(key, JSON.stringify(state));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return {\n    persistAtom\n  };\n};\n\nexports.recoilPersist = recoilPersist;","map":{"version":3,"sources":["/Users/yeoinsu/Desktop/Ari/frontend/node_modules/recoil-persist/dist/index.js"],"names":["Object","defineProperty","exports","value","recoilPersist","config","window","persistAtom","key","storage","localStorage","onSet","node","trigger","setSelf","state","getState","then","s","hasOwnProperty","newValue","_","isReset","updateState","setState","toParse","getItem","undefined","parseState","JSON","parse","e","console","error","mergeItem","stringify","setItem"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.recoilPersist = void 0;\n/**\n * Recoil module to persist state to storage\n *\n * @param config Optional configuration object\n * @param config.key Used as key in local storage, defaults to `recoil-persist`\n * @param config.storage Local storage to use, defaults to `localStorage`\n */\nconst recoilPersist = (config = {}) => {\n    if (typeof window === 'undefined') {\n        return {\n            persistAtom: () => { },\n        };\n    }\n    const { key = 'recoil-persist', storage = localStorage } = config;\n    const persistAtom = ({ onSet, node, trigger, setSelf }) => {\n        if (trigger === 'get') {\n            const state = getState();\n            if (typeof state.then === 'function') {\n                state.then((s) => {\n                    if (s.hasOwnProperty(node.key)) {\n                        setSelf(s[node.key]);\n                    }\n                });\n            }\n            if (state.hasOwnProperty(node.key)) {\n                setSelf(state[node.key]);\n            }\n        }\n        onSet(async (newValue, _, isReset) => {\n            const state = getState();\n            if (typeof state.then === 'function') {\n                state.then((s) => updateState(newValue, s, node.key, isReset));\n            }\n            else {\n                updateState(newValue, state, node.key, isReset);\n            }\n        });\n    };\n    const updateState = (newValue, state, key, isReset) => {\n        if (isReset) {\n            delete state[key];\n        }\n        else {\n            state[key] = newValue;\n        }\n        setState(state);\n    };\n    const getState = () => {\n        const toParse = storage.getItem(key);\n        if (toParse === null || toParse === undefined) {\n            return {};\n        }\n        if (typeof toParse === 'string') {\n            return parseState(toParse);\n        }\n        if (typeof toParse.then === 'function') {\n            return toParse.then(parseState);\n        }\n        return {};\n    };\n    const parseState = (state) => {\n        if (state === undefined) {\n            return {};\n        }\n        try {\n            return JSON.parse(state);\n        }\n        catch (e) {\n            console.error(e);\n            return {};\n        }\n    };\n    const setState = (state) => {\n        try {\n            if (typeof storage.mergeItem === 'function') {\n                storage.mergeItem(key, JSON.stringify(state));\n            }\n            else {\n                storage.setItem(key, JSON.stringify(state));\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    return { persistAtom };\n};\nexports.recoilPersist = recoilPersist;\n"]},"metadata":{},"sourceType":"script"}